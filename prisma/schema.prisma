generator client {
  provider          = "prisma-client-js"
  previewFeatures   = ["fullTextSearch"]
  max               = 5000
  connectionTimeout = 0
  replicas          = 1
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int         @id @default(autoincrement())
  email     String      @unique @db.VarChar(320)
  fullName  String?     @db.VarChar(320)
  password  String?     @db.VarChar(255)
  mobile    String?     @unique @db.VarChar(20)
  role      UserRole?
  status    UserStatus?
  isActive  Boolean     @default(true)
  isVerify  Boolean     @default(true)
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt @db.Date
}

model ParticipationType {
  id                 Int       @id @default(autoincrement())
  title              String    @unique @db.VarChar(320)
  price              Int?
  fees               Boolean
  spouse             Boolean
  petra              Boolean
  petraSpouse        Boolean
  accommodationAqaba Boolean
  accommodationAmman Boolean
  isActive           Boolean   @default(true)
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt @db.Date
  companies          Company[]
}

model Country {
  id           Int       @id @default(autoincrement())
  cca3         String    @db.Char(3)
  cca2         String    @unique @db.Char(2)
  ccn3         String?   @unique @db.Char(3)
  currencyCode String?
  name         String?   @unique
  phone        String?
  companies    Company[]
}

model Company {
  id              Int                @id @default(autoincrement())
  name            String             @db.VarChar(320)
  email           String?
  logo            String?
  entryDate       DateTime?
  expirationDate  DateTime?
  countryId       Int?
  country         Country?           @relation(fields: [countryId], references: [id])
  participationId Int?
  participation   ParticipationType? @relation(fields: [participationId], references: [id])
  isActive        Boolean            @default(true)
  createdAt       DateTime           @default(now())
  updatedAt       DateTime           @updatedAt @db.Date
}

model Accommodation {
  id             Int           @id @default(autoincrement())
  hotelName      String        @db.VarChar(320)
  urlTitle       String?
  location       String?
  stars          String?
  hotelTax       String?
  hotelService   String?
  hotelOrder     Int?
  hotelNameAr    String?
  distance       String?
  time           String?
  timeInArabic   String?
  entryDate      DateTime?
  expirationDate DateTime?
  isActive       Boolean       @default(true)
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt @db.Date
  hotelRooms     HotelRoom[]
  hotelImages    HotelImages[]
}

model HotelRoom {
  id                   Int            @id @default(autoincrement())
  roomCategory         String         @db.VarChar(320)
  roomCategoryInArabic String?
  numberOfRooms        Int
  single               Int
  double               Int
  available            Int
  accommodationId      Int?
  accommodation        Accommodation? @relation(fields: [accommodationId], references: [id])
  isActive             Boolean        @default(true)
  createdAt            DateTime       @default(now())
  updatedAt            DateTime       @updatedAt @db.Date
}

model HotelImages {
  id              Int            @id @default(autoincrement())
  fileKey         String         @db.VarChar(320)
  accommodationId Int?
  accommodation   Accommodation? @relation(fields: [accommodationId], references: [id])
  isActive        Boolean        @default(true)
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt @db.Date
}

enum UserStatus {
  APPROVED
  PENDING
}

enum UserRole {
  ADMINISTRATOR
  USER
}

enum TicketStatus {
  INPROGRESS
  PENDING
  DONE
}
